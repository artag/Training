# Работа с областями

Каждая область - это функциональный сегмент приложения: администрирование, выписка счетов-фактур,
поддержка пользователей и т.д.

Каждая область имеет свою собственную структуру папок.


## Создание области

Папка верхнего уровня `Areas`.
Внутри нее есть папка, содержащая свои папки `Controllers`, `Views`, `Models`.
В текущем проекте:
`Areas`
`Areas/Admin`
`Areas/Admin/Controllers`
`Areas/Admin/Views`
`Areas/Admin/Views/Home`
`Areas/Admin/Models`


## Создание маршрута для области

Добавляется следующий машрут (см. `Startup.Configure()`):
```cs
routes.MapRoute(
    name: "areas",
    template: "{area:exists}/{controller=Home}/{action=Index}");
```

Переменная сегмента `area` используется для сопоставления с URL, которые нацелены на контроллеры
в специфических областях.

Ограничение `exists` применяется для гарантии соответствия запросов только областям, определенных
в приложении.


## Создание контроллера для области

Контроллер в целом похож на стандартный. Отличие - к контроллеру должен быть применен атрибут `Area`:
(из `Areas/Admin/Controllers/HomeController`):
```cs
[Area("Admin")]
public class HomeController : Controller
{
    ...
}
```

Без атрибута `Area` контроллер не будет принадлежать области, даже если он будет лежать в
нужной директории.

Если для настройки маршрутов применяются атрибуты, тогда можно ссылаться на область с применением
маркера `[area]`.

Пример:
```cs
[Route("[area]/app/[controller]/actions/[action]/{id?}")]
```


## Генерирование ссылок на действия в областях

Для создания ссылок, указывающих на действия в *той же* области ничего дополнительно делать не надо.
(см. Areas/Admin/Views/Home/Index.cshtml):
```html
    <a asp-controller="Home" asp-action="Index">
        Link to Home controller in Admin area
    </a>
```

Чтобы создать ссылку на действие в *другой* области или в главной части приложения, систему
маршрутизации надо снабдить значением для сегмента `area`.
(см. Areas/Admin/Views/Home/Index.cshtml):
```html
<a asp-area="" asp-controller="Home" asp-action="Index">
    Link to Home controller in main (root) area
</a>
```

Атрибут `asp-area` устанавливает значение для переменной сегмента `area`.
В данном примере переменная устанавливается в пустую строку, что указывает на главную часть
приложения.
