# Класс Startup
В классе `Program` работа по конфигурированию приложения делегируется классу `Startup` через метод:
```cs
...
.UseStartup<Startup>()
...
```

К классе `Startup` определены два метода, `ConfigureServices()` и `Configure()`.
При запуске создается новый экземпляр класса `Startup` и вызывается `ConfigureServices()`,
через который приложение создает свои службы.

После, вызывается `Configure()`, который настраивает *конвейер запросов*.
Конвейер запросов представляет собой набор компонентов (называемых
*промежуточным программным обеспечением* или *Middleware*), используемых для обработки входящих
HTTP-запросов и генерации ответов на них.

# Службы ASP.NET
Служба - объект, предоставляющий функциональность другим частям приложения.
Пример службы:
`Infrastructure/UptimeService.cs` - пример таймера, который показывает время выполнения приложения.

`ConfigureServices()` получает объект, реализующий `IServiceCollection`.

## Регистрация службы
Регистрация службы производится в `Startup/ConfigureServices()`:
```cs
...
services.AddSingleton<UptimeService>();
...
```
`AddSingleton()` - создает единственный объект для всего приложения.

## Доступ к созданной службе
*Внедрение зависимостей* позволяет любому контроллеру получить доступ к нужной службе.

Пример можно посмотреть в контроллере `Home`, который получает доступ к службе `UptimeService`
через свой конструктор.

Каждый раз, когда поступает запрос к стандартному URL, инфраструктура MVC создает новый
`HomeController` и предоставляет ему разделяемый `UptimeService`.

## Службы MVC
Для включения служб MVC требуется один метод `AddMvc()`:
```cs
services.AddMvc();
```
Он содержит все требуемые ему службы.
