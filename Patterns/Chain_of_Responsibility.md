# Цепочка обязанностей

*Также известен как*: CoR, Chain of Command, Chain of Responsibility

*Сложность*: 2/3

*Популярность*: 1/3

## Структура

![Структура](./images/cor.png)

1. **Обработчик** определяет общий для всех конкретных обработчиков интерфейс.
Обычно достаточно описать единственный метод обработки запросов,
но иногда здесь может быть объявлен и метод выставления следующего обработчика.

2. **Базовый обработчик** - опциональный класс, который позволяет избавиться от
дублирования одного и того же кода во всех конкретных обработчиках.

  Обычно этот класс имеет поле для хранения ссылки на следующий обработчик в цепочке.
  Клиент связывает обработчики в цепь, подавая ссылку на следующий обработчик через
  конструктор или сеттер поля. Также здесь можно реализовать базовый метод обработки,
  который бы просто перенаправлял запрос следующему обработчику, проверив его наличие.

3. **Конкретные обработчики** содержат код обработки запросов. При получении запроса
каждый обработчик решает, может ли он обработать запрос, а также стоит ли
передать его следующему объекту.

  В большинстве случаев обработчики могут работать сами по себе и быть неизменяемыми,
  получив все нужные детали через параметры конструктора.

4. **Клиент** может либо сформировать цепочку обработчиков единожды, либо перестраивать
её динамически, в зависимости от логики программы. Клиент может отправлять запросы
любому из объектов цепочки, не обязательно первому из них.

## Применимость

Паттерн встречается не так уж часто, так как для его применения нужна цепь
объектов, например, связанный список.

## Признаки применения паттерна

Цепочку обязанностей можно определить по спискам обработчиков или проверок,
через которые пропускаются запросы. Особенно если порядок следования обработчиков важен.
