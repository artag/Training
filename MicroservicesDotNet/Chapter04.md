# 4. Identifying and scoping microservices

- Scoping microservices for business capability.
(Определение области применения микросервисов для бизнес-функций)

- Scoping microservices to support technical capabilities.
(Определение области применения микросервисов для поддержки технических функций)

- Scoping microservices to support efficient development work.
(Определение области применения микросервисов для эффективной разработки/развития)

- Managing when scoping microservices is difficult.
(Разрешение затруднений в определении области действия микросервисов)

- Carving out new microservices from existing ones.
(Создание новых микросервисов из существующих)

Чтобы успешно работать с микросервисами, важно уметь правильно определять область
действия каждого микросервиса.

- Если микросервисы слишком велики, процесс разработки будет занимать много времени.
- Если микросервисы слишком малы, то будет много связей между ними.
- Если они имеют неправильные границы, то будет большое сцепление между ними. Что
усложняет структуру и процессы разработки

Критерии для определения границ микросервисов:

- Business capabilities (бизнес функции). Основной критерий.
- Technical capabilities (технические функции).

Следование этим критериям приводит к созданию микросервисов, которые имеют
характеристики, описанные в [главе 1](Chapter01.md):

- У микросервиса одна ответственность.
- Микросервис может быть развернут индивидуально.
- Микросервис состоит из одного или нескольких процессов.
- У каждого микросервиса свое собственное хранилище данных.
- Небольшая команда может поддерживать несколько микросервисов.
- Микросервис можно заменить.

## 4.1 The primary driver for scoping microservices: Business capabilities

(Основной критерий для определения границ микросервисов: бизнес-функции)

Каждый микросервис должен иметь ровно одну ответственность.
Основной способ определить границу микросервиса - анализ бизнес-проблемы
и определение бизнес-функции. Каждая бизнес-функция должна быть
реализована отдельным микросервисом.

### 4.1.1 What is a business capability? (Что такое бизнес-функция?)

Бизнес-функция - это то, что делает организация для достижению бизнес-целей.

Микросервис моделирует бизнес-функции.
В одних случаях микросервис реализует все бизнес-функции и полностью автоматизирует их.
В других случаях микросервис реализует только часть бизнес-фунцкций,
остальная часть задач бизнеса выполняется людьми в реальности.

>Business capabilities and bounded contexts (Бизнес-функции и ограниченные контексты)
>
>*Domain-driven design* (DDD) - это подход к проектированию программных систем,
>основанный на моделировании бизнес-области. Важным шагом является определение языка, >используемого экспертами предметной области для обсуждения домена.
>
>В разных частях domain (предметной области) одно и тоже определение может
>иметь разные смыслы и значения.
>
>*Ограниченный контекст* (bounded context) в DDD является частью более широкой
>предметной области (domain), в пределах которой слова означают одно и то же.
>Ограниченный контекст (bounded context) определяет границу предметной области,
>в пределах которой язык является согласованным.
>С другой стороны, бизнес-функции - это то, что бизнесу необходимо сделать.
>В рамках одного ограниченного контекста (bounded context) бизнесу может потребоваться
>выполнить несколько задач. Каждая из этих задач, скорее всего,
>является бизнес-функцией.

### 4.1.2 Identifying business capabilities. (Определение бизнес-функций)

Хорошее понимание предметной области (domain) позволяет понять, как
функционирует бизнес. Понимание того, как функционирует бизнес, помогает определить
бизнес-функции, из которых состоит бизнес, и его процессы.

Знание предметной области можно получить от людей, хорошо разбирающихся в бизнес-сфере:
бизнес-аналитиков, конечных пользователей и т.д.

Организация бизнеса обычно отражает его предметную область (domain).
Различными частями бизнеса управляют разные группы людей, и каждая группа отвечает за выполнение определенной задачи бизнеса; таким образом, разбиение бизнеса по областям
может подсказать, как следует выделить микросервисы.

Микросервис будет ответственен только за задачи одной группы.
Если он пересекает границу между двумя группами, то, вероятно, имеет слишком широкий
охват и его будет трудно разрабатывать и поддерживать.

Иногда можно обнаружить части домена, в которых организация и предметная область
(domain) находятся в противоречии. Можно воспользоваться одним из двух подходов:

- Можно решить, что система не может полностью отразить предметную область (domain)
и надо реализовать несколько микросервисов, которые не очень хорошо согласуются с
ней, но зато хорошо согласуются с организацией.

- Можно изменить организацию, чтобы она отражала предметную область (domain).

Оба подхода имеют недостатки:

- В первом подходе создаются микросервисы с ограниченной областью действия,
которые могут стать сильно связанными.

- Второй подход вызовет перемещение людей и обязанностей между группами.

### 4.1.3 Example: Point-of-sale system (POS). (Пример: Система точек продаж)

